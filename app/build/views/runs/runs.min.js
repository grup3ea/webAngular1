/*! fooddportsweb - v0.0.0 - 2017-01-21 */"use strict";angular.module("myApp.runs",["ngRoute","ngMap","ngGeolocation","ngAnimate","toastr"]).config(["$routeProvider",function(a){a.when("/runs/:userid",{templateUrl:"views/runs/runs.html",controller:"RunCtrl as vm"})}]).controller("RunCtrl",function(a,b,c,d,e,f,g,h,i){a.storageuser=JSON.parse(localStorage.getItem("fs_web_userdata")),a.user=[],b.get(urlapi+"/runs/byUserId/"+c.userid).then(function(b){console.log("data success"),console.log(b),a.user=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}),a.run={},a.centerPos={lat:0,long:0};var j=this;j.run={name:"polyline",path:[[]]},a.selectRun=function(c){b.get(urlapi+"/runs/byRunId/"+c._id).then(function(b){console.log("data success"),console.log(b),a.run=b.data,j.run={name:"polyline",path:[]};for(var d=0;d<c.positions.length;d++)j.run.path.push([c.positions[d].lat,c.positions[d].long]);a.centerPos.lat=c.positions[0].lat,a.centerPos.long=c.positions[0].long},function(a,b){console.log("data error"),console.log(b),console.log(a)})},a.centerMap=function(b){a.centerPos.lat=b.lat,a.centerPos.long=b.long},a.myPosition={},a.geoActivated=!1;var k=$.getJSON("//freegeoip.net/json/?callback=?",function(b){k=b,console.log(k),a.myPosition={coords:{latitude:k.latitude,longitude:k.longitude}},console.log(a.myPosition.coords)});i.getCurrentPosition({timeout:6e4}).then(function(b){a.geoActivated=!0,a.myPosition=b,console.log(a.myPosition.coords)}),h.getMap().then(function(a){console.log(a.getCenter()),console.log("markers",a.markers),console.log("shapes",a.shapes)})});