/*! fooddportsweb - v0.0.0 - 2017-01-22 */"use strict";angular.module("myApp.client",["ngRoute","chart.js","ngAnimate"]).config(["$routeProvider",function(a){a.when("/client/:clientid",{templateUrl:"views/client/client.html",controller:"ClientCtrl"})}]).controller("ClientCtrl",function(a,b,c,d,e,f,g){a.storageuser=JSON.parse(localStorage.getItem("fs_web_userdata")),a.client={},b.get(urlapi+"users/"+c.clientid).then(function(b){console.log("data success"),console.log(b),a.client=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}).then(function(a){}),a.trainer={},b.get(urlapi+"trainers/"+a.storageuser._id).then(function(b){console.log("data success"),console.log(b),a.trainer=b.data,localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}).then(function(a){}),a.addRoutine=function(a){var g=e.prompt().title("Add new routine").textContent("Name the routine").placeholder("Routine name").ariaLabel("Dog name").initialValue("").targetEvent(a).ok("Create Routine").cancel("Cancel");e.show(g).then(function(a){d.show(d.simple().textContent("Creating new routine: "+a).position("bottom right").hideDelay(3e3)),b({url:urlapi+"routines/addToClient/"+c.clientid,method:"POST",data:{title:a}}).then(function(a){console.log("response: "),console.log(a.data),f.location="#!/editRoutine/"+a.data._id},function(a){d.show(d.simple().textContent("Failed on generating new routine").position("bottom right").hideDelay(3e3))})},function(){d.show(d.simple().textContent("New Routine canceled").position("bottom right").hideDelay(3e3))})},a.data=[],a.labels=[],a.generateGraph=function(b){a.markSelected=b.title,console.log(a.markSelected),console.log("generant data de gràfic"),a.data=[],a.labels=[];for(var c=0;c<b.days.length;c++)a.data.push(b.days[c].value),a.labels.push(g("date")(b.days[c].date,"dd.MM.y"));console.log("algoritme de generació de la data del gràfic completat"),console.log(a.data),console.log(a.labels)}});