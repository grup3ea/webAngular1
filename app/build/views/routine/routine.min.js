/*! fooddportsweb - v0.0.0 - 2017-01-22 */"use strict";angular.module("myApp.routine",["ngRoute"]).config(["$routeProvider",function(a){a.when("/routine/:routineid",{templateUrl:"views/routine/routine.html",controller:"RoutineCtrl"})}]).controller("RoutineCtrl",function(a,b,c,d){a.storageuser=JSON.parse(localStorage.getItem("fs_web_userdata")),a.routine={},b.get(urlapi+"routines/"+c.routineid).then(function(b){console.log("data success"),console.log(b),a.routine=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}).then(function(a){}),a.exercises=[{title:"",description:"",img:"",weight:"",distance:"",reps:"",series:""}],a.addExercise=function(){a.exercises.push({title:"",description:"",img:"",weight:"",distance:"",reps:"",series:""})},a.delExercise=function(b){var c=a.exercises.indexOf(b);a.exercises.splice(c,1)},a.markDayAsCompleted=function(d){b({url:urlapi+"routines/completeDay/"+c.routineid,method:"POST",data:{dayid:d._id}}).then(function(b){console.log("Dia completado, tus puntos tienes ya "),console.log(b.data),a.routine=b.data})},a.addDay=function(){d.show(d.simple().textContent("Adding new day").position("bottom right").hideDelay(3e3));var e={day:{title:a.newDay.title,description:a.newDay.description,exercises:a.exercises}};console.log(e),b({url:urlapi+"routines/"+c.routineid+"/days",method:"POST",data:e}).then(function(b){console.log("day added, response: "),console.log(b.data),a.routine=b.data,a.newDay={},a.exercises=[{title:"",description:"",img:"",weight:"",distance:"",reps:"",series:""}]},function(a){d.show(d.simple().textContent("Failed on generating new routine").position("bottom right").hideDelay(3e3))})}});