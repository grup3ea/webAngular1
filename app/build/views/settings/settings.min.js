/*! fooddportsweb - v0.0.0 - 2017-01-21 */"use strict";angular.module("myApp.settings",["ngRoute","ng.deviceDetector"]).config(["$routeProvider",function(a){a.when("/settings",{templateUrl:"views/settings/settings.html",controller:"SettingsCtrl"})}]).controller("SettingsCtrl",function(a,b,c){a.storageuser=JSON.parse(localStorage.getItem("fs_web_userdata"));var d=this;d.data=c,a.currentSession=d.data,"user"==a.storageuser.role?(b.get(urlapi+"users/"+a.storageuser._id).then(function(b){console.log("data success"),console.log(b),localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}),a.deleteSelectedSessions=function(){for(var c=[],d=0;d<a.storageuser.tokens.length;d++)1==a.storageuser.tokens[d].todelete&&c.push(a.storageuser.tokens[d]);console.log(c),b({url:urlapi+a.storageuser.role+"s/"+a.storageuser._id+"/deleteSelectedTokens",method:"POST",data:{devicesToDelete:c}}).then(function(b){console.log(b),localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a){console.log(a)})}):"trainer"==a.storageuser.role?(b.get(urlapi+"trainers/"+a.storageuser._id).then(function(b){console.log("data success"),console.log(b),localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}),a.deleteSelectedSessions=function(){for(var c=[],d=0;d<a.storageuser.tokens.length;d++)1==a.storageuser.tokens[d].todelete&&c.push(a.storageuser.tokens[d]);console.log(c),b({url:urlapi+a.storageuser.role+"s/"+a.storageuser._id+"/deleteSelectedTokens",method:"POST",data:{devicesToDelete:c}}).then(function(b){console.log(b),localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a){console.log(a)})}):"chef"==a.storageuser.role&&(b.get(urlapi+"chefs/"+a.storageuser._id).then(function(b){console.log("data success"),console.log(b),localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a,b){console.log("data error"),console.log(b),console.log(a)}),a.deleteSelectedSessions=function(){for(var c=[],d=0;d<a.storageuser.tokens.length;d++)1==a.storageuser.tokens[d].todelete&&c.push(a.storageuser.tokens[d]);console.log(c),b({url:urlapi+a.storageuser.role+"s/"+a.storageuser._id+"/deleteSelectedTokens",method:"POST",data:{devicesToDelete:c}}).then(function(b){console.log(b),localStorage.setItem("fs_web_userdata",JSON.stringify(b.data)),a.storageuser=b.data},function(a){console.log(a)})})});